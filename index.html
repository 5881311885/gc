<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Protected PNG — Passcode</title>
  <style>
    /* page layout */
    html,body { height:100%; margin:0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:#111; color:#fff; display:flex; align-items:center; justify-content:center; }
    .container { position:relative; width:90vw; max-width:900px; height:80vh; max-height:600px; border-radius:12px; overflow:hidden; box-shadow:0 10px 40px rgba(0,0,0,.6); background:linear-gradient(180deg,#222,#0d0d0d); display:flex; align-items:center; justify-content:center; }

    /* the PNG area */
    .image-wrap { position:relative; width:100%; height:100%; display:flex; align-items:center; justify-content:center; background: #000; }
    .main-image { max-width:100%; max-height:100%; opacity:0; transform: translateY(8px); transition: opacity 900ms ease, transform 900ms ease; pointer-events:none; user-select:none; }

    /* fade-in active class */
    .main-image.visible { opacity:1; transform: translateY(0); }

    /* overlay lock screen */
    .overlay { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; background: linear-gradient(180deg, rgba(3,3,3,.85), rgba(0,0,0,.85)); backdrop-filter: blur(4px); transition: opacity 600ms ease, visibility 600ms; z-index:30; }
    .overlay.hidden { opacity:0; visibility:hidden; pointer-events:none; }

    .panel { width:320px; max-width:90%; padding:22px; border-radius:10px; background: rgba(255,255,255,0.03); box-shadow: 0 6px 18px rgba(0,0,0,.6); text-align:center; }
    .panel h2 { margin:0 0 12px 0; font-size:18px; font-weight:600; letter-spacing:0.2px; }
    .panel p { margin:0 0 16px 0; color:#ccc; font-size:13px; }

    .input-row { display:flex; gap:8px; align-items:center; }
    input[type="password"] { flex:1; padding:10px 12px; border-radius:8px; border:1px solid rgba(255,255,255,0.08); background:rgba(255,255,255,0.02); color:#fff; outline:none; font-size:15px; }
    input[type="password"]:focus { box-shadow:0 0 0 3px rgba(255,255,255,0.03); border-color: rgba(255,255,255,0.2); }
    button { padding:10px 14px; border-radius:8px; border:0; background:linear-gradient(180deg,#28a;#146); color:#fff; font-weight:600; cursor:pointer; }
    button:active { transform: translateY(1px); }

    .msg { margin-top:12px; height:18px; font-size:13px; color:#ffcccb; }

    /* small footer */
    .footer { position:absolute; bottom:10px; left:12px; font-size:12px; color:#9a9a9a; }
  </style>
</head>
<body>
  <div class="container" role="main" aria-labelledby="title">
    <div class="image-wrap" aria-hidden="false">
      <!-- Put your PNG file path in src -->
      <img id="mainImage" class="main-image" src="your-image.png" alt="Protected image" />
    </div>

    <div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-label="Passcode required">
      <div class="panel">
        <h2 id="title">Enter passcode to view</h2>
        <p>Type the passcode and press Unlock.</p>

        <form id="passForm" onsubmit="return false;" autocomplete="off" aria-describedby="msg">
          <div class="input-row">
            <input id="passInput" type="password" inputmode="text" autocomplete="off" placeholder="Passcode" aria-label="Passcode" required />
            <button id="submitBtn" type="submit">Unlock</button>
          </div>
        </form>

        <div id="msg" class="msg" role="status" aria-live="polite"></div>
      </div>
    </div>

    <div class="footer">Demo: client-side passcode (not secure for real protection)</div>
  </div>

<script>
/*
  How this works:
  - StoredHash is the SHA-256 hex digest of the allowed passcode.
  - When the user submits, we hash their input with Web Crypto and compare.
  - If it matches, overlay gets hidden and PNG fades in.
  - To set your own passcode: compute SHA-256(passcode) and replace storedHash below.
*/

// === 15efc6bc2a02e5e97edca1e74a4555ce455a6abe1d11714c566bf7f14bf41f86 ===
// Example below is the SHA-256 of "letmein123":
const storedHash = "9b0eb22aef89516d6fb4b31ccf008a68abe0d10a3fc606316389613eccf96854";

// helper: convert ArrayBuffer to hex
function bufToHex(buffer) {
  const bytes = new Uint8Array(buffer);
  return Array.from(bytes).map(b => b.toString(16).padStart(2,'0')).join('');
}

// compute SHA-256 using SubtleCrypto
async function sha256Hex(message) {
  const enc = new TextEncoder();
  const data = enc.encode(message);
  const hashBuf = await crypto.subtle.digest('SHA-256', data);
  return bufToHex(hashBuf);
}

const form = document.getElementById('passForm');
const input = document.getElementById('passInput');
const msg = document.getElementById('msg');
const overlay = document.getElementById('overlay');
const mainImage = document.getElementById('mainImage');
const submitBtn = document.getElementById('submitBtn');

async function handleSubmit() {
  const val = input.value || "";
  // a little UX guard
  submitBtn.disabled = true;
  msg.textContent = "Checking…";

  try {
    const h = await sha256Hex(val);
    if (h === storedHash) {
      msg.style.color = "#bfffc9";
      msg.textContent = "Passcode accepted. Opening…";

      // briefly delay for UX then hide overlay & fade in image
      setTimeout(() => {
        overlay.classList.add('hidden');
        // make sure the image is visible then add visible class to transition
        mainImage.classList.add('visible');
        // clear sensitive variable
        input.value = "";
      }, 400);
    } else {
      msg.style.color = "#ffb3b3";
      msg.textContent = "Incorrect passcode.";
      // shake or focus
      input.focus();
    }
  } catch (err) {
    console.error(err);
    msg.style.color = "#ffb3b3";
    msg.textContent = "Error checking passcode.";
  } finally {
    submitBtn.disabled = false;
  }
}

// allow Enter key
form.addEventListener('submit', (e) => {
  e.preventDefault();
  handleSubmit();
});

// optional: pressing Escape clears input
input.addEventListener('keydown', (e) => {
  if (e.key === "Escape") input.value = "";
});

// lazy-load the image for better UX (image will still fade-in)
mainImage.onload = () => {
  // keep hidden until unlocked
  mainImage.style.willChange = "opacity, transform";
};
</script>
</body>
</html>
